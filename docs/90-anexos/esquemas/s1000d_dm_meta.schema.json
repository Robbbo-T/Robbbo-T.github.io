{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "S1000D Data Module Metadata Schema v1.0",
  "description": "JSON Schema for validating S1000D Data Module front-matter with UTCS-MI v5.0 traceability",
  "type": "object",
  "required": ["utcs_mi_v5_id", "s1000d"],
  "properties": {
    "utcs_mi_v5_id": {
      "type": "string",
      "pattern": "^[^:]+:[^:]+:[^:]+:[^:]+:[^:]+:[^:]+:[^:]+:[^:]+:[^:]+:[^:]+:[^:]+:[^:]+:[^:]+$",
      "description": "13-field UTCS-MI v5.0 identifier separated by colons"
    },
    "s1000d": {
      "type": "object",
      "required": ["schema_version", "dmc", "language", "issue", "security"],
      "properties": {
        "schema_version": {
          "type": "string",
          "enum": ["5.0", "4.2", "4.1", "4.0"],
          "description": "S1000D schema version"
        },
        "dmc": {
          "type": "string",
          "pattern": "^DMC-[A-Z0-9]{2,5}-[A-Z]-[0-9]{2}-[0-9]{2}-[0-9]{2}-[0-9]{2}-[0-9]{3}[A-Z]-[0-9]{3}[A-Z]-[A-Z]$",
          "description": "Data Module Code following S1000D structure"
        },
        "title": {
          "type": "string",
          "maxLength": 256,
          "description": "Data Module title"
        },
        "language": {
          "type": "string",
          "pattern": "^[a-z]{2}-[A-Z]{2}$",
          "description": "Language code (ISO 639-1 + ISO 3166-1)"
        },
        "issue": {
          "type": "string",
          "pattern": "^[0-9]{3}$",
          "description": "Issue number (3 digits)"
        },
        "security": {
          "type": "string",
          "pattern": "^[0-9]{2}$",
          "description": "Security classification code"
        },
        "responsiblePartnerCompany": {
          "type": "string",
          "pattern": "^[A-Z0-9]{2,5}$",
          "description": "CAGE code of responsible partner company"
        },
        "originator": {
          "type": "string",
          "pattern": "^[A-Z0-9]{2,5}$",
          "description": "CAGE code of originator"
        },
        "applicability": {
          "type": "object",
          "properties": {
            "assert": {
              "type": "array",
              "items": {"type": "string"}
            }
          }
        },
        "brexDmRef": {
          "type": "object",
          "required": ["dmRef"],
          "properties": {
            "dmRef": {
              "type": "object",
              "required": ["dmRefIdent"],
              "properties": {
                "dmRefIdent": {
                  "type": "object",
                  "required": ["dmCode"],
                  "properties": {
                    "dmCode": {
                      "type": "string",
                      "pattern": "^DMC-[A-Z0-9]{2,5}-[A-Z]-[0-9]{2}-[0-9]{2}-[0-9]{2}-[0-9]{2}-[0-9]{3}[A-Z]-[0-9]{3}[A-Z]-[A-Z]$"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "tektok_ref": {
      "type": "string",
      "pattern": "^TEKTOK-[A-Z]{3}-[a-z0-9-]+-[0-9]{4}$",
      "description": "Reference to associated TEKTOK if applicable"
    },
    "dmrl_entry": {
      "type": "object",
      "properties": {
        "dmrl_id": {
          "type": "string",
          "description": "DMRL entry identifier"
        },
        "status": {
          "type": "string",
          "enum": ["required", "in-progress", "complete", "approved", "rejected"],
          "description": "DMRL entry status"
        },
        "priority": {
          "type": "string",
          "enum": ["critical", "high", "medium", "low"],
          "description": "DMRL entry priority"
        }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "created": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "modified": {
          "type": "string", 
          "format": "date-time",
          "description": "Last modification timestamp"
        },
        "authors": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name"],
            "properties": {
              "name": {"type": "string"},
              "id": {"type": "string"},
              "role": {"type": "string"}
            }
          }
        },
        "reviewers": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name"],
            "properties": {
              "name": {"type": "string"},
              "id": {"type": "string"},
              "status": {
                "type": "string",
                "enum": ["pending", "approved", "rejected"]
              }
            }
          }
        }
      }
    }
  }
}